/*! media-credit media-credit-tinymce.js 2019-05-19 6:51:01 PM */

tinymce.PluginManager.add("mediacredit",function(A){"use strict";var s,M,a,p,n,e=tinymce.each,g=tinymce.trim,t=tinymce.Env.iOS;function i(e){return!(!A.dom.getAttrib(e,"data-mce-placeholder")&&!A.dom.getAttrib(e,"data-mce-object"))}function r(e){var t=A.$(e).parents("[contenteditable]");return t&&"false"===t.attr("contenteditable")}function d(e){return l(e.replace(/(?:<p>)?\[(?:wp_)?caption([^\]]+)\]([\s\S]+?)\[\/(?:wp_)?caption\](?:<\/p>)?/g,function(e,t,a){var n,i,r,d,o,c;return(n=t.match(/id=['"]([^'"]*)['"] ?/))&&(t=t.replace(n[0],"")),(i=t.match(/align=['"]([^'"]*)['"] ?/))&&(t=t.replace(i[0],"")),(r=t.match(/class=['"]([^'"]*)['"] ?/))&&(t=t.replace(r[0],"")),(c=t.match(/width=['"]([0-9]*)['"] ?/))&&(t=t.replace(c[0],"")),o=l(o=(o=null!==(o=(a=g(a)).match(/((?:\[media-credit[^\]]+\]\s*)(?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?(?:\s*\[\/media-credit\])?)([\s\S]*)/i))?o:a.match(/((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)([\s\S]*)/i))&&o[2]?(d=g(o[2]),g(o[1])):(d=g(t).replace(/caption=['"]/,"").replace(/['"]$/,""),a)),n=n&&n[1]?n[1].replace(/[<>&]+/g,""):"",i=i&&i[1]?i[1]:"alignnone",r=r&&r[1]?" "+r[1].replace(/[<>&]+/g,""):"",!c&&o&&(c=o.match(/width=['"]([0-9]*)['"]/)),c&&c[1]&&(c=c[1]),c&&d?(c=parseInt(c,10),A.getParam("wpeditimage_html5_captions")||(c+=10),'<div class="mceTemp"><dl id="'+n+'" class="wp-caption '+i+r+'" style="width: '+c+'px"><dt class="wp-caption-dt">'+o+'</dt><dd class="wp-caption-dd">'+d+"</dd></dl></div>"):a}),!0)}function l(e,u){var t;return t=(u=void 0!==u&&u)?/(?:<p>)?\[media-credit([^\]]+)\]([\s\S]+?)\[\/media-credit\](?:<\/p>)?/g:/\[media-credit([^\]]+)\]([\s\S]+?)\[\/media-credit\]/g,e.replace(t,function(e,t,a){var n,i,r,d,o,c,l,m,s,p,g=tinymce.trim;return(n=t.match(/id=['"]?([0-9]+)['"]? ?/))&&(t=t.replace(n[0],"")),(i=t.match(/align=['"]([^'"]*)['"] ?/))&&(t=t.replace(i[0],"")),(r=t.match(/width=['"]([0-9]*)['"] ?/))&&(t=t.replace(r[0],"")),(l=t.match(/link=['"]([^'"]*)['"] ?/))&&(t=t.replace(l[0],"")),(p=t.match(/nofollow=['"]([^'"]*)['"] ?/))&&(t=t.replace(p[0],"")),(m=t.match(/name=[']([^']*)['] ?/i))||(m=t.match(/name=["]([^"]*)["] ?/i)),m&&(t=t.replace(m[0],"")),(d=(a=g(a)).match(/((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)([\s\S]*)/i))&&d[1]&&(d=g(d[1])),n=n&&n[1]?n[1]:"",i=i&&i[1]?i[1]:"alignnone",l=l&&l[1]?l[1]:"",m=m&&m[1]?m[1]:"",p=p&&p[1]?p[1]:"",!r&&d&&(r=d.match(/width=['"]([0-9]*)['"]/)),r&&r[1]&&(r=r[1]),r&&(m||n)?(o=parseInt(r,10),A.getParam("wpeditimage_html5_captions")||(o+=10),s=(s=""+(m||mundschenk.mediaCredit.id[n]+mundschenk.mediaCredit.options.separator+mundschenk.mediaCredit.options.organization)).replace(/<[^>]+>(.*)<\/[^>]+>/g,"$1"),c=d+wp.html.string({tag:"span",content:s,attrs:{class:"mceMediaCreditTemp mceNonEditable","data-media-credit-author-id":n,"data-media-credit-text":_.escape(m),"data-media-credit-align":i,"data-media-credit-link":_.escape(l),"data-media-credit-nofollow":_.escape(p)}}),u&&(c=wp.html.string({tag:"div",content:c,attrs:{class:"mceMediaCreditOuterTemp "+i,style:"width: "+o+"px"}})),c):a})}function o(e){return c(e.replace(/(?:<div [^>]+mceTemp[^>]+>)?\s*(<dl [^>]+wp-caption[^>]+>[\s\S]+?<\/dl>)\s*(?:<\/div>)?/g,function(e,t){var a="";return-1===t.indexOf("<img ")||-1!==t.indexOf("</p>")?t.replace(/<d[ldt]( [^>]+)?>/g,"").replace(/<\/d[ldt]>/g,""):(-1===(a=t.replace(/\s*<dl ([^>]+)>\s*<dt [^>]+>([\s\S]+?)<\/dt>\s*<dd [^>]+>([\s\S]*?)<\/dd>\s*<\/dl>\s*/gi,function(e,t,a,n){var i,r,d,o;return o=(o=a.match(/width="([0-9]*)"/))&&o[1]?o[1]:"",d=(r=(r=t.match(/class="([^"]*)"/))&&r[1]?r[1]:"").match(/align[a-z]+/i)||"alignnone",o&&n?(i=(i=t.match(/id="([^"]*)"/))&&i[1]?i[1]:"",(r=r.replace(/wp-caption ?|align[a-z]+ ?/gi,""))&&(r=' class="'+r+'"'),n=(n=n.replace(/\r\n|\r/g,"\n").replace(/<[a-zA-Z0-9]+( [^<>]+)?>/g,function(e){return e.replace(/[\r\n\t]+/," ")})).replace(/\s*\n\s*/g,"<br />"),'[caption id="'+i+'" align="'+d+'" width="'+o+'"'+r+"]"+(a=c(a))+" "+n+"[/caption]"):("alignnone"!==d[0]&&(a=a.replace(/><img/,' class="'+d[0]+'"><img')),a)})).indexOf("[caption")&&(a=t.breplace(/[\s\S]*?((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)(<p>[\s\S]*<\/p>)?[\s\S]*/gi,"<p>$1</p>$2")),a)}),!0)}function c(e,t){var a=/((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)<span class="mceMediaCreditTemp[^"]*" ([^>]*)>([\s\S]+?)<\/span>/g;return(t=void 0!==t&&t)&&(a=/<div class="mceMediaCreditOuterTemp[^"]*"[^>]*>((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)<span class="mceMediaCreditTemp[^"]*" ([^>]*)>([\s\S]+?)<\/span><\/div>/g),e.replace(a,function(e,t,a,n){var i,r,d,o,c,l,m,s,p="";return-1===t.indexOf("<img ")?"<p>"+n+"</p>":(d=(d=t.match(/width="([0-9]*)"/))&&d[1]?d[1]:"",i=u(a,"data-media-credit-author-id","[0-9]+",!0),o=u(a,"data-media-credit-align","[^'\"]*",!1),r=_.unescape(u(a,"data-media-credit-text",'[^"]*',!1)),c=_.unescape(u(a,"data-media-credit-link",'[^"]*',!1)),l=_.unescape(u(a,"data-media-credit-nofollow",'[^"]*',!1)),d&&(r||i)?(m=-1<r.indexOf('"')?"name='"+r+"'":'name="'+r+'"',s=i?"id="+i:m,c&&(s+=' link="'+c+'"'),l&&"true"===l&&(s+=' nofollow="true"'),0!==(p="[media-credit "+s+' align="'+o+'" width="'+d+'"]'+t+"[/media-credit]").indexOf("[media-credit")&&(p=t.replace(/[\s\S]*?((?:<a [^>]+>)?<img [^>]+>(?:<\/a>)?)(<p>[\s\S]*<\/p>)?[\s\S]*/gi,"<p>$1</p>$2")),p):t)})}function u(e,t,a,n){var i,r=null;return(n=void 0!==n&&n)&&(i=new RegExp(t+"=("+a+") ?"),r=e.match(i)),r||(i=new RegExp(t+'="('+a+')" ?'),r=e.match(i)),r||(i=new RegExp(t+"='("+a+")' ?"),r=e.match(i)),r=r&&r[1]?r[1]:""}function P(e){return e&&!!(e.textContent||e.innerText).replace(/\ufeff/g,"")}function m(e){var t=A.dom.getParent(e,"div.mceTemp")||A.dom.getParent(e,"div.mceMediaCreditOuterTemp");t||"IMG"!==e.nodeName||(t=A.dom.getParent(e,"a")),t?(t.nextSibling?A.selection.select(t.nextSibling):t.previousSibling?A.selection.select(t.previousSibling):A.selection.select(t.parentNode),A.selection.collapse(!0),A.dom.remove(t)):A.dom.remove(e),A.nodeChanged(),A.undoManager.add()}return A.addButton("wp_img_remove",{tooltip:"Remove",icon:"dashicon dashicons-no",onclick:function(){m(A.selection.getNode())}}),A.addButton("wp_img_edit",{tooltip:"Edit|button",icon:"dashicon dashicons-edit",onclick:function(){!function(t){var a,e,n;if("undefined"==typeof wp||!wp.media)return A.execCommand("mceImage");n=function(e){var t,a,n,i,r,d,o,c,l,m=[],s=A.dom,p=/^\d+$/;(n={attachment_id:!1,size:"custom",caption:"",align:"none",extraClasses:"",link:!1,linkUrl:"",linkClassName:"",linkTargetBlank:!1,linkRel:"",title:"",mediaCreditText:"",mediaCreditAuthorID:"",mediaCreditLink:"",mediaCreditNoFollow:""}).url=s.getAttrib(e,"src"),n.alt=s.getAttrib(e,"alt"),n.title=s.getAttrib(e,"title"),o=s.getAttrib(e,"width"),c=s.getAttrib(e,"height"),(!p.test(o)||parseInt(o,10)<1)&&(o=e.naturalWidth||e.width);(!p.test(c)||parseInt(c,10)<1)&&(c=e.naturalHeight||e.height);n.customWidth=n.width=o,n.customHeight=n.height=c,t=tinymce.explode(e.className," "),a=[],tinymce.each(t,function(e){/^wp-image/.test(e)?n.attachment_id=parseInt(e.replace("wp-image-",""),10):/^align/.test(e)?n.align=e.replace("align",""):/^size/.test(e)?n.size=e.replace("size-",""):a.push(e)}),n.extraClasses=a.join(" "),n.captionClassName=m.join(" "),(i=s.getParents(e,".wp-caption")).length&&(i=i[0],t=i.className.split(" "),tinymce.each(t,function(e){/^align/.test(e)?n.align=e.replace("align",""):e&&"wp-caption"!==e&&m.push(e)}),(r=s.select("dd.wp-caption-dd",i)).length&&(r=r[0],n.caption=A.serializer.serialize(r).replace(/<br[^>]*>/g,"$&\n").replace(/^<p>/,"").replace(/<\/p>$/,"")));e.parentNode&&"A"===e.parentNode.nodeName&&(d=e.parentNode,n.linkUrl=s.getAttrib(d,"href"),n.linkTargetBlank="_blank"===s.getAttrib(d,"target"),n.linkRel=s.getAttrib(d,"rel"),n.linkClassName=d.className);l=d?s.getNext(d,".mceMediaCreditTemp"):s.getNext(e,".mceMediaCreditTemp");l&&(n.align=n.align&&"none"!==n.align?n.align:s.getAttrib(l,"data-media-credit-align","").replace("align",""),n.mediaCreditText=s.getAttrib(l,"data-media-credit-text",""),n.mediaCreditAuthorID=s.getAttrib(l,"data-media-credit-author-id",""),n.mediaCreditLink=s.getAttrib(l,"data-media-credit-link",""),n.mediaCreditNoFollow=s.getAttrib(l,"data-media-credit-nofollow",""));return n}(t),wp.media.events.trigger("editor:image-edit",{editor:A,metadata:n,image:t}),a=wp.media({frame:"image",state:"image-details",metadata:n}),wp.media.events.trigger("editor:frame-create",{frame:a}),e=function(e){A.focus(),A.undoManager.transact(function(){!function(e,t){var a,n,i,r,d,o,c,l,m,s,p,g,u,h,f,w,v,C,N,b,_,T,x=A.dom;(a=tinymce.explode(t.extraClasses," "))||(a=[]);i=e.parentNode&&"A"===e.parentNode.nodeName&&!P(e.parentNode)?e.parentNode:e;v=x.getNext(i,".mceMediaCreditTemp"),t.caption||(v?x.setAttrib(v,"data-media-credit-align","align"+t.align):a.push("align"+t.align));t.attachment_id&&(a.push("wp-image-"+t.attachment_id),t.size&&"custom"!==t.size&&a.push("size-"+t.size));h=t.width,f=t.height,"custom"===t.size&&(h=t.customWidth,f=t.customHeight);g={src:t.url,width:h||null,height:f||null,title:t.title||null,class:a.join(" ")||null},x.setAttribs(e,g),A.$(e).attr("alt",t.alt||""),u={href:t.linkUrl,rel:t.linkRel||null,target:t.linkTargetBlank?"_blank":null,class:t.linkClassName||null},e.parentNode&&"A"===e.parentNode.nodeName&&!P(e.parentNode)?t.linkUrl?x.setAttribs(e.parentNode,u):x.remove(e.parentNode,!0):t.linkUrl&&((c=x.getParent(e,"a"))&&x.insertAfter(e,c),c=x.create("a",u),e.parentNode.insertBefore(c,e),c.appendChild(e));l=A.dom.getParent(e,".mceTemp"),h=parseInt(h,10),A.getParam("wpeditimage_html5_captions")||(h+=10);t.caption?(t.caption=function(e){if(!e||-1===e.indexOf("<")&&-1===e.indexOf(">"))return e;M||(M=new tinymce.html.Serializer({},A.schema));return M.serialize(A.parser.parse(e,{forced_root_block:!1}))}(t.caption),p=t.attachment_id?"attachment_"+t.attachment_id:null,w="align"+(t.align||"none"),n="wp-caption "+w,t.captionClassName&&(n+=" "+t.captionClassName.replace(/[<>&]+/g,"")),v&&x.setAttrib(v,"data-media-credit-align",w),l?((s=x.select("dl.wp-caption",l)).length&&x.setAttribs(s,{id:p,class:n,style:"width: "+h+"px"}),(m=x.select(".wp-caption-dd",l)).length&&x.setHTML(m[0],t.caption)):(r="<dl "+(p=p?'id="'+p+'" ':"")+'class="'+n+'" style="width: '+h+'px"><dt class="wp-caption-dt"></dt><dd class="wp-caption-dd">'+t.caption+"</dd></dl>",o=x.create("div",{class:"mceTemp"},r),(d=x.getParent(i,"p"))||(d=x.getParent(i,".mceMediaCreditOuterTemp"))?(d.parentNode.insertBefore(o,d),x.remove(i),v&&x.remove(v)):i.parentNode.insertBefore(o,i),i=A.$(o).find("dt.wp-caption-dt").append(i),d&&x.isEmpty(d)&&x.remove(d),v&&i.append(v))):(N=!t.mediaCreditText&&!t.mediaCreditAuthorID,l?(v=x.getNext(i,".mceMediaCreditTemp"),d=v&&!N?(w="align"+(t.align||"none"),x.create("div",{class:"mceMediaCreditOuterTemp "+w,style:"width: "+h+"px"})):x.create("p"),l.parentNode.insertBefore(d,l),d.appendChild(i),v&&!N&&d.appendChild(v),x.remove(l)):(C=x.getParent(v,".mceMediaCreditOuterTemp"))&&(N?(d=x.create("p"),C.parentNode.insertBefore(d,C),d.appendChild(i),x.remove(C)):(w="align"+(t.align||"none"),C.className=C.className.replace(/ ?align(left|center|right|none)/g," ")+w,x.setAttrib(C,"style","width: "+h+"px"))),b=A.$(e),_=b.attr("srcset"),T=b.attr("src"),_&&T&&(T=T.replace(/[?#].*/,""),-1===_.indexOf(T)&&b.attr("srcset",null).attr("sizes",null)));wp.media.events&&wp.media.events.trigger("editor:image-update",{editor:A,metadata:t,image:e});A.nodeChanged()}(t,e)}),a.detach()},a.state("image-details").on("update",e),a.state("replace-image").on("replace",e),a.on("close",function(){A.focus(),a.detach()}),a.open()}(A.selection.getNode())}}),e({alignleft:"Align left",aligncenter:"Align center",alignright:"Align right",alignnone:"No alignment"},function(e,n){var t=n.slice(5);A.addButton("wp_img_"+n,{tooltip:e,icon:"dashicon dashicons-align-"+t,cmd:"alignnone"===n?"wpAlignNone":"Justify"+t.slice(0,1).toUpperCase()+t.slice(1),onPostRender:function(){var a=this;A.on("NodeChange",function(e){var t;"IMG"===e.element.nodeName&&(t=A.dom.getParent(e.element,".wp-caption")||e.element,"alignnone"===n?a.active(!/\balign(left|center|right)\b/.test(t.className)):a.active(A.dom.hasClass(t,n)))})}})}),A.once("preinit",function(){A.wp&&A.wp._createToolbar&&(s=A.wp._createToolbar(["wp_img_alignleft","wp_img_aligncenter","wp_img_alignright","wp_img_alignnone","wp_img_edit","wp_img_remove"]))}),A.on("wptoolbar",function(e){"IMG"!==e.element.nodeName||i(e.element)||(e.toolbar=s)}),t&&A.on("init",function(){A.on("touchstart",function(e){"IMG"!==e.target.nodeName||r(e.target)||(a=!0)}),A.dom.bind(A.getDoc(),"touchmove",function(){a=!1}),A.on("touchend",function(e){var t;a&&"IMG"===e.target.nodeName&&!r(e.target)?(t=e.target,a=!1,window.setTimeout(function(){A.selection.select(t),A.nodeChanged()},100)):s&&s.hide()})}),A.on("init",function(){var t=A.dom,e=A.getParam("wpeditimage_html5_captions")?"html5-captions":"html4-captions";t.addClass(A.getBody(),e),tinymce.Env.ie&&10<tinymce.Env.ie&&t.bind(A.getBody(),"mscontrolselect",function(e){"IMG"===e.target.nodeName&&t.getParent(e.target,".wp-caption")?A.getBody().focus():"DL"===e.target.nodeName&&t.hasClass(e.target,"wp-caption")&&e.target.focus()})}),A.on("ObjectResized",function(i){"IMG"===i.target.nodeName&&A.undoManager.transact(function(){var e,t,a=i.target,n=A.dom;"IMG"===a.nodeName&&(a.className=a.className.replace(/\bsize-[^ ]+/,""),(e=n.getParent(a,".wp-caption"))&&(t=i.width||n.getAttrib(a,"width"))&&(t=parseInt(t,10),A.getParam("wpeditimage_html5_captions")||(t+=10),n.setStyle(e,"width",t+"px")))})}),A.on("pastePostProcess",function(e){A.dom.getParent(A.selection.getNode(),"dd.wp-caption-dd")&&(A.$("img, audio, video, object, embed, iframe, script, style",e.node).remove(),A.$("*",e.node).each(function(e,t){A.dom.isBlock(t)&&(tinymce.trim(t.textContent||t.innerText)?(A.dom.insertAfter(A.dom.create("br"),t),A.dom.remove(t,!0)):A.dom.remove(t))}),A.$("br",e.node).each(function(e,t){t.nextSibling&&"BR"!==t.nextSibling.nodeName&&t.previousSibling&&"BR"!==t.previousSibling.nodeName||A.dom.remove(t)}),p=!0)}),A.on("BeforeExecCommand",function(e){var t,a,n,i,r,d,o,c,l=e.command,m=A.dom;if("mceInsertContent"===l||"Indent"===l||"Outdent"===l){if(t=A.selection.getNode(),d=m.getParent(t,"div.mceTemp")||m.getParent(t,"div.mceMediaCreditOuterTemp")){if("mceInsertContent"!==l)return e.preventDefault(),e.stopImmediatePropagation(),!1;if(p)return void(p=!1);a=m.create("p"),m.insertAfter(a,d),A.selection.setCursorLocation(a,0),"IMG"===t.nodeName&&A.$(d).remove(),A.nodeChanged()}}else if("JustifyLeft"===l||"JustifyRight"===l||"JustifyCenter"===l||"wpAlignNone"===l){if(t=A.selection.getNode(),i="align"+l.slice(7).toLowerCase(),n=A.dom.getParent(t,".wp-caption"),"IMG"!==t.nodeName&&!n)return;t=n||t,o=m.getNext(m.getParent(t,"a"),".mceMediaCreditTemp")||m.select(".mceMediaCreditTemp",t),r=A.dom.hasClass(t,i)?" alignnone":" "+i,t.className=g(t.className.replace(/ ?align(left|center|right|none)/g,"")+r),o&&(m.setAttrib(o,"data-media-credit-align",i),(c=m.getParent(o,"div.mceMediaCreditOuterTemp"))&&(c.className=g(c.className.replace(/ ?align(left|center|right|none)/g,"")+r))),A.nodeChanged(),e.preventDefault(),s&&s.reposition(),A.fire("ExecCommand",{command:l,ui:e.ui,value:e.value})}}),A.on("keydown",function(e){var t,a,n,i,r=A.selection,d=e.keyCode,o=A.dom,c=tinymce.util.VK;if(d===c.ENTER)t=r.getNode(),(a=o.getParent(t,"div.mceTemp"))||(a=o.getParent(t,"div.mceMediaCreditOuterTemp")),a&&(o.events.cancel(e),tinymce.each(o.select("dt, dd",a),function(e){o.isEmpty(e)&&o.remove(e)}),i=tinymce.Env.ie&&tinymce.Env.ie<11?"":'<br data-mce-bogus="1" />',n=o.create("p",null,i),"DD"===t.nodeName?o.insertAfter(n,a):a.parentNode.insertBefore(n,a),A.nodeChanged(),r.setCursorLocation(n,0));else if((d===c.DELETE||d===c.BACKSPACE)&&("DIV"===(t=r.getNode()).nodeName&&(o.hasClass(t,"mceTemp")||o.hasClass(t,"mceMediaCreditOuterTemp"))?a=t:"IMG"!==t.nodeName&&"DT"!==t.nodeName&&"A"!==t.nodeName||(a=o.getParent(t,"div.mceTemp")||o.getParent(t,"div.mceMediaCreditOuterTemp")),a))return o.events.cancel(e),m(t),!1}),A.on("NodeChange",function(e){var t,a,n="",i=!1,r=e.element,d=A.dom;if(t=d.getParent(r,"div.mceTemp")||d.getParent(r,"div.mceMediaCreditOuterTemp"))return"A"===r.nodeName&&0===r.children.length?(n=r.textContent,i=!0):"DIV"===r.nodeName&&d.hasClass(r,"mceMediaCreditOuterTemp")&&1===r.children.length&&d.hasClass(r.firstElementChild,"mceMediaCreditTemp")&&(n=r.firstChild.textContent,i=!0),i?(a=d.create("p",null,n),d.insertAfter(a,t),d.events.cancel(e),d.remove(t),!1):void 0}),tinymce.Env.gecko&&A.on("undo redo",function(){"IMG"===A.selection.getNode().nodeName&&A.selection.collapse()}),A.wpSetImgCaption=function(e){return d(e)},A.wpGetImgCaption=function(e){return o(e)},A.on("beforeGetContent",function(e){"raw"!==e.format&&A.$('img[id="__wp-temp-img-id"]').attr("id",null)}),A.on("BeforeSetContent",function(e){"raw"!==e.format&&(e.content=A.wpSetImgCaption(e.content))}),A.on("PostProcess",function(e){e.get&&(e.content=A.wpGetImgCaption(e.content))}),A.on("dragstart",function(){var e=A.selection.getNode();"IMG"===e.nodeName&&((n=A.dom.getParent(e,".mceTemp"))||"A"!==e.parentNode.nodeName||P(e.parentNode)||(n=e.parentNode))}),A.on("drop",function(e){var t=A.dom,a=tinymce.dom.RangeUtils.getCaretRangeFromPoint(e.clientX,e.clientY,A.getDoc());a&&t.getParent(a.startContainer,".mceTemp")?e.preventDefault():n&&(e.preventDefault(),A.undoManager.transact(function(){a&&A.selection.setRng(a),A.selection.setNode(n),t.remove(n)})),n=null}),A.wp=A.wp||{},A.wp.isPlaceholder=i,{_do_shcode:d,_get_shcode:o}});